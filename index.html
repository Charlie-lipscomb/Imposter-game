<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Imposter - Social Deduction Game</title>
    
    <style>
        /* --- CSS STYLING (FOR SLEEK UI) --- */
        :root {
            --primary-color: #4CAF50; /* Green */
            --secondary-color: #2196F3; /* Blue */
            --background-color: #2c3e50; /* Dark Blue/Grey */
            --card-color: #34495e; /* Slightly Lighter Dark */
            --text-color: #ecf0f1; /* Light Grey */
            --accent-color: #f39c12; /* Orange for alerts */
            --border-radius: 8px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        /* --- Screens --- */
        .screen {
            max-width: 600px;
            width: 100%;
            display: none;
            text-align: center;
            animation: fadeIn 0.5s ease-in-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        /* --- Cards and Boxes --- */
        .lobby-card, .player-list-card, .clue-box {
            background: var(--card-color);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        h2 {
            margin-bottom: 20px;
            color: var(--text-color);
        }

        /* --- Inputs and Buttons --- */
        input[type="text"] {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid var(--card-color);
            border-radius: var(--border-radius);
            background-color: #2c3e50;
            color: var(--text-color);
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        .primary-btn, .secondary-btn {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: none;
            border-radius: var(--border-radius);
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
        }

        .primary-btn {
            background-color: var(--primary-color);
            color: white;
        }

        .secondary-btn {
            background-color: var(--secondary-color);
            color: white;
        }

        .primary-btn:hover { background-color: #43a047; }
        .secondary-btn:hover { background-color: #1e88e5; }
        .primary-btn:active, .secondary-btn:active { transform: scale(0.98); }

        .primary-btn:disabled, .secondary-btn:disabled {
            background-color: #7f8c8d;
            cursor: not-allowed;
        }

        .separator {
            color: #95a5a6;
            margin: 15px 0;
            font-size: 0.9em;
            font-style: italic;
        }

        .footer-note {
            font-size: 0.8em;
            color: #95a5a6;
        }

        /* --- Game Screen Specifics --- */
        .game-area {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .clue-box {
            flex: 2;
            text-align: center;
        }

        .secret-word {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 20px;
        }

        #role-display {
            color: var(--primary-color);
            margin: 20px 0;
            font-size: 1.5em;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }

        .player-list-card {
            flex: 1;
        }

        #player-list {
            list-style: none;
            padding: 0;
            text-align: left;
        }

        #player-list li {
            padding: 8px 0;
            border-bottom: 1px solid #3e526a;
        }

        #player-list li:last-child {
            border-bottom: none;
        }

        #input-area {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        #clue-input {
            flex-grow: 1;
            margin-bottom: 0;
        }

        #submit-clue-btn {
            width: auto;
            padding: 10px 15px;
            margin-bottom: 0;
        }

        /* Responsive adjustment for smaller screens */
        @media (max-width: 500px) {
            .game-area {
                flex-direction: column;
            }
            .player-list-card {
                order: -1; /* Move player list above the clue box on mobile */
            }
        }
    </style>
</head>
<body>

    <div id="lobby-screen" class="screen active">
        <h1>üïµÔ∏è Find the Imposter</h1>
        <div class="lobby-card">
            <h2>Join or Start a Game</h2>
            <input type="text" id="username-input" placeholder="Enter Your Name" maxlength="15">
            <button id="create-lobby-btn" class="primary-btn">Create New Lobby</button>
            <div class="separator">OR</div>
            <input type="text" id="code-input" placeholder="Enter Lobby Code">
            <button id="join-lobby-btn" class="secondary-btn" disabled>Join Lobby</button>
        </div>
        <p class="footer-note">A word game of secrets and suspicion.</p>
    </div>

    <div id="game-screen" class="screen">
        <div class="game-header">
            <p>Lobby Code: <span id="display-code"></span></p>
            <h2 id="role-display">Loading Role...</h2>
        </div>

        <div class="game-area">
            <div class="clue-box">
                <p id="word-display" class="secret-word"></p>
                <div id="status-message">Waiting for all players...</div>
                <div id="input-area" style="display: none;">
                    <input type="text" id="clue-input" placeholder="Your one-word clue" maxlength="20">
                    <button id="submit-clue-btn">Submit Clue</button>
                </div>
            </div>

            <div class="player-list-card">
                <h3>Players</h3>
                <ul id="player-list">
                    </ul>
            </div>
        </div>
        
        <button id="start-game-btn" class="primary-btn" style="display: none;">Start Game</button>
        <button id="vote-btn" class="secondary-btn" style="display: none;">Start Voting</button>
    </div>

    <script>
        /* --- JAVASCRIPT LOGIC (CLIENT-SIDE SIMULATION) --- */
        document.addEventListener('DOMContentLoaded', () => {
            const lobbyScreen = document.getElementById('lobby-screen');
            const gameScreen = document.getElementById('game-screen');
            const usernameInput = document.getElementById('username-input');
            const codeInput = document.getElementById('code-input');
            const joinLobbyBtn = document.getElementById('join-lobby-btn');
            const createLobbyBtn = document.getElementById('create-lobby-btn');
            const startGameBtn = document.getElementById('start-game-btn');
            
            // Game State Variables (Client-side placeholders for a real server)
            let myUsername = '';
            let lobbyCode = '';
            let myRole = '';
            
            // --- LOBBY SCREEN LOGIC ---
            
            // Enable/Disable buttons based on input content
            const checkInputs = () => {
                const hasUsername = usernameInput.value.trim().length > 0;
                const hasCode = codeInput.value.trim().length > 0;
                // Join needs both name and code
                joinLobbyBtn.disabled = !(hasUsername && hasCode); 
                // Create needs only a name
                createLobbyBtn.disabled = !hasUsername;
            };

            usernameInput.addEventListener('input', checkInputs);
            codeInput.addEventListener('input', checkInputs);
            
            // Function to handle creating a lobby (Simulated)
            createLobbyBtn.addEventListener('click', () => {
                myUsername = usernameInput.value.trim();
                if (myUsername) {
                    // --- This is where REAL server communication would happen ---
                    // Simulation:
                    lobbyCode = 'ABCD'; 
                    myRole = 'Host';
                    joinGame(lobbyCode, myRole, myUsername, true); 
                }
            });

            // Function to handle joining a lobby (Simulated)
            joinLobbyBtn.addEventListener('click', () => {
                myUsername = usernameInput.value.trim();
                lobbyCode = codeInput.value.trim().toUpperCase();
                if (myUsername && lobbyCode) {
                    // --- This is where REAL server communication would happen ---
                    // Simulation:
                    myRole = 'Player'; 
                    joinGame(lobbyCode, myRole, myUsername, false); 
                }
            });
            
            // --- GAME SCREEN INITIALIZATION ---
            
            function joinGame(code, role, username, isHost) {
                // Toggle screens
                lobbyScreen.classList.remove('active');
                gameScreen.classList.add('active');

                document.getElementById('display-code').textContent = code;
                document.getElementById('role-display').textContent = `Welcome, ${username}! (Current Role: ${role})`;
                
                // Only the Host sees the Start Game button
                if (isHost) {
                    startGameBtn.style.display = 'block';
                }

                // Add self and simulated others to the player list
                updatePlayerList([username, 'AgentSmith', 'Neo', 'Trinity']); 
            }
            
            function updatePlayerList(players) {
                const list = document.getElementById('player-list');
                list.innerHTML = '';
                players.forEach(player => {
                    const li = document.createElement('li');
                    li.textContent = player;
                    list.appendChild(li);
                });
            }

            // --- GAMEPLAY LOGIC (Conceptual/Simulated) ---

            // Host starting the game
            startGameBtn.addEventListener('click', () => {
                // --- This is where the server assigns roles and words ---
                
                // Client-side simulation of game start:
                const secretWord = 'Guitar'; // For Civilians
                const imposterWord = 'Harp'; // For Imposter (a similar, related word)
                
                // Simulate role assignment (based on username for testing)
                const isImposter = (myUsername.toLowerCase() === 'neosim'); // Example logic: Neo is the imposter
                const wordToDisplay = isImposter ? imposterWord : secretWord;
                
                document.getElementById('role-display').innerHTML = isImposter ? 
                    'üö® **YOU ARE THE IMPOSTER!** üö®' : 
                    '‚úÖ **YOU ARE A CIVILIAN**';
                    
                document.getElementById('word-display').textContent = `Secret Word: ${wordToDisplay}`;
                document.getElementById('status-message').textContent = "Give your one-word clue now!";
                document.getElementById('input-area').style.display = 'flex';
                startGameBtn.style.display = 'none';

                startClueRound();
            });
            
            function startClueRound() {
                const submitBtn = document.getElementById('submit-clue-btn');
                const clueInput = document.getElementById('clue-input');
                
                submitBtn.addEventListener('click', () => {
                    const clue = clueInput.value.trim();
                    if (clue) {
                        // --- This is where the server manages turn order and broadcasts clues ---
                        
                        alert(`Clue submitted: ${clue}. Waiting for others... (This is a simulation)`);
                        
                        // Display the submitted clue to the user (simulation)
                        document.getElementById('status-message').innerHTML = `**${myUsername}** submitted: *"${clue}"*. Waiting for next action...`;
                        
                        clueInput.value = '';
                        submitBtn.disabled = true; // Prevent spamming
                        
                        // After all players submit, the server would enable voting:
                        // document.getElementById('vote-btn').style.display = 'block'; 
                    }
                });
            }

            // Initial check to set button state on load
            checkInputs();
        });
    </script>
</body>
</html>
